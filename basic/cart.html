<html>
  <meta charset="UTF-8"/>
  <head></head>
  <body></body>

  <div id="cart"></div>

  <script type="module">
    import { curry, go, pipe, map, filter, reduce, log } from "../lib/curryUtils.js";

    const products = [
      { name: '반팔티', price: 15000, quantity: 1 },
      { name: '긴팔티', price: 20000, quantity: 2 },
      { name: '핸드폰케이스', price: 15000, quantity: 3 },
      { name: '후드티', price: 30000, quantity: 4 },
      { name: '바지', price: 25000, quantity: 5 },
    ];

    const add = (a, b) => a + b;

    // 총 수량 추상화 단계

    // 1.
    // go(
    //   products,
    //   map(p => p.quantity),
    //   reduce((a, b) => a + b),
    //   log,
    // );

    // 2.
    // const totalQuantity = products => go(
    //   products,
    //   map(p => p.quantity),
    //   reduce((a, b) => a + b),
    // );
    // log(totalQuantity(products));

    // 3.
    // const totalQuantity = pipe(
    //   map(p => p.quantity),
    //   reduce(add),
    // );
    // const totalPrice = pipe(
    //   map(p => p.price * p.quantity),
    //   reduce(add),
    // );
    // log(totalPrice(products));

    // 4.
    const sum = curry((f, it) => go(
      it,
      map(f),
      reduce(add),
    ));
    const totalQuantity = sum(p => p.quantity);
    const totalPrice = sum(p => p.price * p.quantity);

    log(totalQuantity(products));
    log(totalPrice(products));






  </script>
</html>